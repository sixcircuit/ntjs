"use strict";

var { eq, ok, async_echo } = require('./common.js');

test("array notation", function(done){
    
   for(var i = 0; i < 100; i++){
      await { 
         async_echo(defer(for x, y), i, i*2);
      }
   }

   eq(x, _.range(100));
   eq(y, _.map(_.range(100), function(v){ return(v*2); }));

   done();

});

test("array notation raw", function(done){
    
   for(var i = 0; i < 100; i++){
      await { 
         async_echo(defer(raw x), i, i*2);
      }
   }

   var expected = _.map(_.range(100), function(v){ return([v, v*2]); });

   eq(x, expected);

   done();

});
